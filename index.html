<!DOCTYPE html>
<html lang='it'>
    <head>
        <meta charset="utf-8">
        
        <!--STYLESHEET-->
        <link rel="stylesheet" href="styles.css">
        
        <!--ANGULARJS-->
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.6/angular.min.js"></script>
        
        <!--JQUERY-->
        <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.11.3.min.js"></script>
        
        <!--FIREBASE-->
        <script src="https://cdn.firebase.com/js/client/2.3.1/firebase.js"></script>
        
        <!--OUR SCRIPTS | I NOSTRI SCRIPT-->
        <script src="js/util.js"></script>
        <script src="js/TimePeriod.js"></script>
        <script src="js/color.js"></script>
		<script src="js/interceptWheel.js"></script>
        <script src="js/size.js"></script>
        <script src="js/draw.js"></script>
        <script src="js/scroll.js"></script>
        <script src="js/windowattr.js"></script>
        <script src="js/eventHandle.js"></script>
        <script src="js/animations.js"></script>
        <script src="js/search.js"></script>
        <script src="js/bookmarks.js"></script>
        <script src="js/login.js"></script>
        <script src="js/addevent.js"></script>
        <script src="js/cite.js"></script>
        <script src="js/encycl.js"></script>
        <!--
        <script src="js/min.js"></script>
        -->
        
        <!--SHORTCUT ICON-->
        <link rel="shortcut icon" href="favicon.ico">
        
        <!--TITLE-->
        <title>Storia di Venezia</title>
    </head>
    
    <!--
    AngularJS application
    Application: appTimeline
    Controller: controllerTimeline
    
    Allows for the population of the page with imported data later on.
    -->
    <body data-ng-app="appTimeline" data-ng-controller="controllerTimeline">
        <noscript>Questa pagina utilizza JavaScript. Il suo browser non supporta JavaScript, oppure JavaScript Ã¨ disabilitato. Si preghiamo di permetterlo od usare un altro browser.</noscript>
        <!--BEGIN GOOGLE TRANSLATE COMPONENT
        Includes the Google Translate component on the page.
        Specifies the layout of the component as well as its specific settings.
        -->
        <div id="google_translate_element" class="slidein"></div><script type="text/javascript">
            function googleTranslateElementInit() {
                new google.translate.TranslateElement({pageLanguage: 'it', layout: google.translate.TranslateElement.InlineLayout.HORIZONTAL, autoDisplay: false}, 'google_translate_element');
            }
        </script><script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
        <!--END GOOGLE TRANSLATE COMPONENT-->
        
        <!--BEGIN PAGE CONTENT-->
        <!--TITLE-->
        <h1 class="fadein">Storia di Venezia</h1>
        
        <!--BEGIN TIME PERIOD COMPONENT-->
        <p class="timeperiod" data-ng-if="zoom !== 0" id="timeperiod">L&#8217;Impero Romano (400 - 538)</p>
        <!--END TIME PERIOD COMPONENT-->
        
        <!--BEGIN NAVBAR COMPONENT
        Specifies the navbar component, with links
        -->
        <div id=nav class=fadein>
            <!--WPI-->                  <a href="http://wpi.edu" target="_blank" id="wpilink" title="Worcester Polytechnic Institute"></a>
            <!--VPC-->                  <a href="http://veniceprojectcenter.org" target="_blank" id="vpclink" title="Venice Project Center"></a>
            <!--Supernova Edizioni-->   <a href="http://www.supernovaedizioni.it" target="_blank" id="selink" title="Supernova Edizioni srl"></a>
            <!--Our Team-->             <a href="https://sites.google.com/site/ve15chron/" target="_blank" id="teamlink" title="Website del nostro team"></a>
        </div>
        <!--END NAVBAR COMPONENT-->

        <!--BEGIN FUNCTIONBAR COMPONENT-->
        <div id=func class=fadein>
            <!--Login-->                <a id="loginb" onclick="openLogin();"></a>
            <!--Add event-->            <a id="addeventb" onclick="openAEF();"></a>
            <!--Logout-->               <a id="logoutb" onclick="logout();"></a>
            <!--Credits/Help-->         <a href="crediti.html" target="_blank" id="credlink" title="Crediti"></a>
        </div>
        <!--END FUNCTIONBAR COMPONENT-->
        
        <!--BEGIN CONTENT PANEL COMPONENT
        Specifies the content panel layout and design.
        Also provides the specification for AngularJS to display the panels.
        For the data used to populate these panels, see data.json.
        For the function used to read in the data, see controller.js::app.controller::farg1.
        For the function used to size the panels, see size.js::size().
        -->
        <div id=timeline class=fadein>
            <!--For each event in the JSON file, display it iff its content matches the search, if present, and its taglist (Filter) contains the selected filter, if any.-->
            <article id="art" data-ng-if="(zoom >= 1)&&(!bkonly||hasBookmark(filter,event.key))" data-ng-repeat="event in events | filter:getFilter()" data-ng-click="displayInfoPanel(mouseEventToPanelNo($event));obscure();">
                <!--Display the content's date (or year) and its title-->       <h2 data-ng-bind="(event.Date + &quot; &quot; + event.Year) +  (event.Title ? ': ' + event.Title : '')"></h2>
                <!--Display the event's content iff no image-->                 <p data-ng-if="!event.Image" data-ng-bind-html="renderHtml(getText(event.Content))"></p>
                <!--Display a bookmark if there are bookmarks-->                <img class="bookmark" data-ng-if="hasBookmark(filter, event.key)" src="icon/bookmarkimg.png">
                <!--Display the event's image iff present-->                    <img class="ipimg" data-ng-if="event.Image" data-ng-repeat="image in event.Image" data-ng-attr-src="image" data-ng-attr-alt="event.Title">
            </article>
            <article data-ng-if="zoom === 0" data-ng-repeat="period in timePeriods" style="background-color: rgba({{period.color.r}}, {{period.color.g}}, {{period.color.b}}, .5);" data-ng-click="zoomWithDest(period);">
                <h2 data-ng-bind="period.start + &quot;&ndash;&quot; + period.end + &quot;: &quot; + period.title"></h2>
            </article>
        </div>
        <!--END CONTENT PANEL COMPONENT-->
        
        <!--BEGIN INFOPANEL COMPONENT
        Specifies the positioning of the infopanel box (though not its content; see controller.js::$scope.displayInfoPanel() for content).
        Also specifies for the obscuration of the background while the panel is displayed.
        For the code responsible for showing and hiding these panels, see controller.js::$scope.displayInfoPanel() and controller.js::$scope.hideInfoPanel().
        The obscure layer defines an eventListener for mouseup, which calls the functions at controller.js::$scope.hideInfoPanel() and controller.js::$scope.unobscure().
        -->
        <div id="obscure" data-ng-mouseup="hideInfoPanel();unobscure();"></div>
        <div id="infopanel_wrap">
            <div class="bar">
                <img src="icon/pclose.png" data-ng-mouseup="barAct('close');">
                <img src="icon/pright.png" data-ng-mouseup="barAct('next');">
                <img src="icon/pleft.png" data-ng-mouseup="barAct('last');">
                <img src="icon/pback.png" data-ng-mouseup="barAct('back');">
                <img src="icon/bookmark.png" data-ng-mouseup="bookmark();">
            </div>
            <div id="infopanel">
            </div>
        </div>
        <!--END INFOPANEL COMPONENT-->
        
        <!--BEGIN ENCYCLOPAEDIA COMPONENT-->
        <div id="encycl_wrap">
            <div class="bar">
                <img src="icon/pclose.png" onmouseup="enclanim();">
            </div>
            <div id="encycl">
            </div>
        </div>
        <!--END ENCYCLOPAEDIA COMPONENT-->
        
        <!--BEGIN FORMPANEL COMPONENTS-->
        <div class="formpanel" id="loginform">
            <div class="bar">
                <img src="icon/pclose.png" onmouseup="closeLogin();">
            </div>
            <div>
                <form id="login">
                    <table>
                        <tr><td>Username:</td><td><input type="text" name="user" id="login_user"></td></tr>
                        <tr><td>Password:</td><td><input type="password" name="pass" id="login_pass"></td></tr>
                    </table>
                    <input type="submit" onclick="login();closeLogin();">
                </form>
            </div>
        </div>
        
        <div class=formpanel id=addeventform>
            <div class=bar>
                <img src="icon/pclose.png" onmouseup="closeAEF();">
            </div>
            <div>
                <h2>Aggiungere un nuovo evento</h2>
                <p>Per modificare un evento che gi&agrave; esiste, si preghiamo d&#8217;usare l&#8217;API Firebase in <a href="http://venicedata.firebaseio.com/history" target="_blank">venicedata.firebaseio.com/history</a></p>
                <form id=addevent>
                    <table>
                        <tr><td>*Anno:</td><td><input type="number" value=2015 name="Year" id="ae_Year" required></td></tr>
                        <tr><td>Mese:</td><td><input type="text" value="Gennaio" name=Month id=ae_Month></td></tr>
                        <tr><td>Data:</td><td><input type=number value=21 name=Date id=ae_Date></td></tr>
                        <tr><td>*Testo:</td><td><textarea rows=6 cols=50 name=Content id=ae_Content required></textarea></td></tr>
                        <tr><td>*Citazione (Chicago):</td><td><input type=text name=Citation id=ae_Citation required></td></tr>
                        <tr><td>Immagine:</td><td><input type=file name=Image id=ae_Image></td></tr>
                        <tr><td>Web link:</td><td><textarea rows=6 cols=50 name=Links id=ae_Links>Uno per linea</textarea></td></tr>
                    </table>
                    <input type=submit onclick="addEvent();">
                </form>
            </div>
        </div>
        <!--END FORMPANEL COMPOENTS-->
        
        <!--BEGIN SCROLL ARROW COMPONENTS
        Specifies for the positioning and functionality of the arrows displayed to either side of the conent panel component.
        Specifies eventListeners for mouseover (mouseenter), mouseout (mouseleave), mousedown, and mouseup for each arrow.
        Specifies that onmouseover, the scroll delta will be +/-1.
                       onmouseout, the scroll delta will be 0.
                       onmousedown, the scroll delta will be +/-3.
                       onmouseup, the scroll delta will be +/-1.
        For the functions that run on these calls, see controller.js::$scope.scroll().
        For the function that evaluates the scroll delta, see windowattr.js::window.controllerLoad().
        -->
        <div class="arrow fadein" id="larr" data-ng-mouseenter="scroll(-1)" data-ng-mouseleave="stopScroll()" data-ng-mousedown="scroll(-3)" data-ng-mouseup="scroll(-1)"></div>
        <div class="arrow fadein" id="rarr" data-ng-mouseenter="scroll(1)" data-ng-mouseleave="stopScroll()" data-ng-mousedown="scroll(3)" data-ng-mouseup="scroll(1)"></div>
        <!--END SCROLL ARROW COMPONENTS-->
        
        <!--BEGIN TIME AXIS COMPONENT
        Specifies the canvas that will be used to display the canvas.
        For the function that draws the timeline, see draw.js::draw().
        For the function that handles the slider, see eventHandle.js.
        For the function responsible for sizing the canvas, see size.js::size().
        -->
        <div id=timeAxis class=fadein>
            <canvas id="axis" width="100" height="90"></canvas>
        </div>
        <!--END TIME AXIS COMPONENT-->
        
        <!--BEGIN CONTROL BUTTONS COMPONENT
        Specifies for the inclusion of the zoom buttons, filter dropdown, and search box.
        For the section of code that uses these values, see the CONTENT PANEL COMPONENT above.
        -->
        <div id=buttons class=fadein>
            <!--BEGIN ZOOM BUTTONS
            Specifies for the inclusion of the zoom buttons.
            Specifies eventListeners for mouseclick, mouseover, and mouseout.
            Specifies that onmouseclick, the zoom level will increase or decrease
                           onmouseover, the button will animate to demonstrate interactability
                           onmouseout, the button will return to its regular state
            For the functions that adjust zoom level, see controller.js::$scope.zoomIn() and controller.js::$scope.zoomOut().
            For the function that handles the hover animation, see animations.js::hover().
            For the function that handles the unhover animation, see animations.js::unhover().
            -->
            <button data-ng-click="zoomOut()" onmouseover="hover('zoom_out');" onmouseout="unhover('zoom_out');" id="zoom_out"></button>
            <button data-ng-click="zoomIn()" onmouseover="hover('zoom_in');" onmouseout="unhover('zoom_in');" id="zoom_in"></button>
            <!--END ZOOM BUTTONS-->
            
            <!--BEGIN FILTER DROPDOWN
            Specifies for the inclusion of the filter dropdown, including the different options located in it.
            These filters are used to filter the content which is shown above, in the CONTENT PANEL COMPONENT.
            -->
            Gruppo di segnalibri: <select data-ng-model="filter" onchange="if($('#bkmk')[0].value==='new'){newGroup();}else{colorArticles();}" id="bkmk">
                <option data-ng-repeat="groups in getGroups()" data-ng-bind="groups" data-ng-attr-value="groups"></option>
                <option value="new">Nuovo...</option>
            </select>
            <!--END FILTER DROPDOWN-->
            Segnalibri soli: <input type="checkbox" data-ng-model="bkonly">
            <!--SEARCH BOX-->
            Cerca: <input type="text" data-ng-model="actsearch" data-ng-keypress="updateSearch($event);" onchange="colorArticles();" id="search">
            Cerca in: <select onchange="searchchange();" id="searchtype">
                <option value="" selected>Tutto</option>
                <option value="Content">Testo</option>
                <option value="Year">Anno</option>
            </select>
        </div>
        <!--END CONTROL BUTTONS COMPONENT-->
        
        <!--BEGIN LOADING BAR COMPONENT-->
        <div id="load"></div>
        <!--END LOADING BAR COMPONENT-->
        
        <!--END PAGE CONTENT-->
        
        <!--Load the controller-->
        <span data-ng-bind="colorArticles();"></span>
        <script src="js/controller.js"></script>
    </body>
</html>